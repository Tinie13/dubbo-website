<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Apache Dubbo – QOS 操作手册</title><link>https://dubbo.apache.org/zh-cn/overview/mannual/java-sdk/reference-manual/qos/</link><description>Recent content in QOS 操作手册 on Apache Dubbo</description><generator>Hugo -- gohugo.io</generator><language>zh-cn</language><atom:link href="https://dubbo.apache.org/zh-cn/overview/mannual/java-sdk/reference-manual/qos/index.xml" rel="self" type="application/rss+xml"/><item><title>Overview: QOS 概述</title><link>https://dubbo.apache.org/zh-cn/overview/mannual/java-sdk/reference-manual/qos/overview/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://dubbo.apache.org/zh-cn/overview/mannual/java-sdk/reference-manual/qos/overview/</guid><description>
&lt;h2 id="如何使用">如何使用&lt;/h2>
&lt;p>QoS 提供了一些启动参数，来对启动进行配置，他们主要包括：&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>参数&lt;/th>
&lt;th>说明&lt;/th>
&lt;th>默认值&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>qos-enable&lt;/td>
&lt;td>是否启动QoS&lt;/td>
&lt;td>true&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>qos-port&lt;/td>
&lt;td>启动QoS绑定的端口&lt;/td>
&lt;td>22222&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>qos-accept-foreign-ip&lt;/td>
&lt;td>是否允许远程访问&lt;/td>
&lt;td>false&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>qos-accept-foreign-ip-whitelist&lt;/td>
&lt;td>支持的远端主机ip地址（段）&lt;/td>
&lt;td>(无)&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>qos-anonymous-access-permission-level&lt;/td>
&lt;td>支持的匿名访问的权限级别&lt;/td>
&lt;td>PUBLIC(1)&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;blockquote>
&lt;p>注意，从2.6.4/2.7.0开始，qos-accept-foreign-ip默认配置改为false，如果qos-accept-foreign-ip设置为true，有可能带来安全风险，请仔细评估后再打开。&lt;/p>
&lt;/blockquote>
&lt;h3 id="telnet-与-http-协议">telnet 与 http 协议&lt;/h3>
&lt;p>telnet 模块现在同时支持 http 协议和 telnet 协议，方便各种情况的使用
示例：&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-fallback" data-lang="fallback">&lt;span style="display:flex;">&lt;span>➜ ~ telnet localhost 22222
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Trying ::1...
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>telnet: connect to address ::1: Connection refused
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Trying 127.0.0.1...
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Connected to localhost.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Escape character is &amp;#39;^]&amp;#39;.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ████████▄ ███ █▄ ▀█████████▄ ▀█████████▄ ▄██████▄
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ███ ▀███ ███ ███ ███ ███ ███ ███ ███ ███
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ███ ███ ███ ███ ███ ███ ███ ███ ███ ███
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ███ ███ ███ ███ ▄███▄▄▄██▀ ▄███▄▄▄██▀ ███ ███
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ███ ███ ███ ███ ▀▀███▀▀▀██▄ ▀▀███▀▀▀██▄ ███ ███
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ███ ███ ███ ███ ███ ██▄ ███ ██▄ ███ ███
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ███ ▄███ ███ ███ ███ ███ ███ ███ ███ ███
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ████████▀ ████████▀ ▄█████████▀ ▄█████████▀ ▀██████▀
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>dubbo&amp;gt;ls
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>As Provider side:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>+----------------------------------+---+
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>| Provider Service Name |PUB|
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>+----------------------------------+---+
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>|org.apache.dubbo.demo.DemoService| N |
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>+----------------------------------+---+
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>As Consumer side:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>+---------------------+---+
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>|Consumer Service Name|NUM|
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>+---------------------+---+
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>dubbo&amp;gt;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="端口">端口&lt;/h3>
&lt;p>新版本的 telnet 端口 与 dubbo 协议的端口是不同的端口，默认为 &lt;code>22222&lt;/code>&lt;/p>
&lt;p>可以通过配置文件&lt;code>dubbo.properties&lt;/code> 修改:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-fallback" data-lang="fallback">&lt;span style="display:flex;">&lt;span>dubbo.application.qos-port=33333
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>或者&lt;/p>
&lt;p>可以通过设置 JVM 参数:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-fallback" data-lang="fallback">&lt;span style="display:flex;">&lt;span>-Ddubbo.application.qos-port=33333
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="安全">安全&lt;/h3>
&lt;p>默认情况下，dubbo 接收任何主机发起的命令&lt;/p>
&lt;p>可以通过配置文件&lt;code>dubbo.properties&lt;/code> 修改:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-fallback" data-lang="fallback">&lt;span style="display:flex;">&lt;span>dubbo.application.qos-accept-foreign-ip=false
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>或者&lt;/p>
&lt;p>可以通过设置 JVM 参数:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-fallback" data-lang="fallback">&lt;span style="display:flex;">&lt;span>-Ddubbo.application.qos-accept-foreign-ip=false
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>拒绝远端主机发出的命令，只允许服务本机执行。&lt;/p>
&lt;p>同时可以通过设置&lt;code>qos-accept-foreign-ip-whitelist&lt;/code>来指定支持的远端主机ip地址（段），多个ip地址（段）之间用&lt;strong>逗号&lt;/strong>分隔，如：&lt;/p>
&lt;p>配置文件&lt;code>dubbo.properties&lt;/code>&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-fallback" data-lang="fallback">&lt;span style="display:flex;">&lt;span>dubbo.application.qos-accept-foreign-ip-whitelist=123.12.10.13, 132.12.10.13/24
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>设置 JVM 参数:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-fallback" data-lang="fallback">&lt;span style="display:flex;">&lt;span>-Ddubbo.application.qos-accept-foreign-ip-whitelist=123.12.10.13,132.12.10.13/24
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="权限">权限&lt;/h3>
&lt;p>为了对生命周期探针的默认支持，QoS 提供了匿名访问的能力以及对权限级别的设置，目前支持的权限级别有：&lt;/p>
&lt;ul>
&lt;li>PUBLIC(1)&lt;br>
默认支持匿名访问的命令权限级别，目前只支持生命周期探针相关的命令&lt;/li>
&lt;li>PROTECTED(2)&lt;br>
命令默认的权限级别&lt;/li>
&lt;li>PRIVATE(3)&lt;br>
保留的最高权限级别，目前未支持&lt;/li>
&lt;li>NONE(4)
最低权限级别，即不支持匿名访问&lt;/li>
&lt;/ul>
&lt;blockquote>
&lt;p>权限级别 &lt;code>PRIVATE&lt;/code>&amp;gt; &lt;code>PROTECTED&lt;/code>&amp;gt; &lt;code>PUBLIC&lt;/code>&amp;gt; &lt;code>NONE&lt;/code>, 高级别权限可访问同级别和低级别权限命令。
当前以下命令权限为&lt;code>PUBLIC&lt;/code>, 其它命令默认权限别为&lt;code>PROTECTED&lt;/code>。&lt;/p>
&lt;/blockquote>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>命令&lt;/th>
&lt;th>权限等级&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>Live&lt;/td>
&lt;td>PUBLIC (1)&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Startup&lt;/td>
&lt;td>PUBLIC (1)&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Ready&lt;/td>
&lt;td>PUBLIC (1)&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Quit&lt;/td>
&lt;td>PUBLIC (1)&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>默认情况下，dubbo 允许匿名主机发起匿名访问，只有&lt;code>PUBLIC&lt;/code>权限级别的命令可以执行，其他更高权限的命令会被拒绝。&lt;/p>
&lt;p>&lt;strong>关闭匿名访问&lt;/strong>&lt;br>
可以通过设置&lt;code>qos-anonymous-access-permission-level=NONE&lt;/code>来关闭匿名访问。&lt;/p>
&lt;p>&lt;strong>设置权限级别&lt;/strong>&lt;br>
可以通过配置文件&lt;code>dubbo.properties&lt;/code> 修改:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-fallback" data-lang="fallback">&lt;span style="display:flex;">&lt;span>dubbo.application.qos-anonymous-access-permission-level=PROTECTED
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>或者&lt;/p>
&lt;p>可以通过设置 JVM 参数:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-fallback" data-lang="fallback">&lt;span style="display:flex;">&lt;span>-Ddubbo.application.qos-anonymous-access-permission-level=PROTECTED
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>来允许匿名访问更高级别的权限的命令。&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-fallback" data-lang="fallback">&lt;span style="display:flex;">&lt;span>➜ ~ curl &amp;#34;localhost:22222/ls?arg1=xxx&amp;amp;arg2=xxxx&amp;#34;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>As Provider side:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>+----------------------------------+---+
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>| Provider Service Name |PUB|
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>+----------------------------------+---+
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>|org.apache.dubbo.demo.DemoService| N |
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>+----------------------------------+---+
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>As Consumer side:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>+---------------------+---+
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>|Consumer Service Name|NUM|
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>+---------------------+---+
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="配置方式">配置方式&lt;/h2>
&lt;blockquote>
&lt;p>优先顺序: &lt;strong>系统属性 &amp;gt; dubbo.properties &amp;gt; XML/Spring-boot 自动装配&lt;/strong>&lt;/p>
&lt;/blockquote>
&lt;h3 id="系统属性">系统属性&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-fallback" data-lang="fallback">&lt;span style="display:flex;">&lt;span>-Ddubbo.application.qos-enable=true
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>-Ddubbo.application.qos-port=33333
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>-Ddubbo.application.qos-accept-foreign-ip=false
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>-Ddubbo.application.qos-accept-foreign-ip-whitelist=123.12.10.13,132.12.10.13/24
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>-Ddubbo.application.qos-anonymous-access-permission-level=PUBLIC
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="dubboproperties">dubbo.properties&lt;/h3>
&lt;p>在项目的&lt;code>src/main/resources&lt;/code>目录下添加 dubbo.properties文件，内容如下:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-fallback" data-lang="fallback">&lt;span style="display:flex;">&lt;span>dubbo.application.qos-enable=true
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>dubbo.application.qos-port=33333
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>dubbo.application.qos-accept-foreign-ip=false
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>dubbo.application.qos-accept-foreign-ip-whitelist=123.12.10.13, 132.12.10.13/24
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>dubbo.application.qos-anonymous-access-permission-level=PUBLIC
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="xml">XML&lt;/h3>
&lt;p>如果要通过 XML 配置响应的QoS相关的参数，可以进行如下配置：&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-xml" data-lang="xml">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#719e07">&amp;lt;?xml version=&amp;#34;1.0&amp;#34; encoding=&amp;#34;UTF-8&amp;#34;?&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#268bd2">&amp;lt;beans&lt;/span> xmlns=&lt;span style="color:#2aa198">&amp;#34;http://www.springframework.org/schema/beans&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> xmlns:xsi=&lt;span style="color:#2aa198">&amp;#34;http://www.w3.org/2001/XMLSchema-instance&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> xmlns:dubbo=&lt;span style="color:#2aa198">&amp;#34;http://dubbo.apache.org/schema/dubbo&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> xsi:schemaLocation=&lt;span style="color:#2aa198">&amp;#34;http://www.springframework.org/schema/beans
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#2aa198"> http://www.springframework.org/schema/beans/spring-beans.xsd
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#2aa198"> http://dubbo.apache.org/schema/dubbo http://dubbo.apache.org/schema/dubbo/dubbo.xsd&amp;#34;&lt;/span>&lt;span style="color:#268bd2">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#268bd2">&amp;lt;dubbo:application&lt;/span> name=&lt;span style="color:#2aa198">&amp;#34;demo-provider&amp;#34;&lt;/span>&lt;span style="color:#268bd2">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#268bd2">&amp;lt;dubbo:parameter&lt;/span> key=&lt;span style="color:#2aa198">&amp;#34;qos-enable&amp;#34;&lt;/span> value=&lt;span style="color:#2aa198">&amp;#34;true&amp;#34;&lt;/span>&lt;span style="color:#268bd2">/&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#268bd2">&amp;lt;dubbo:parameter&lt;/span> key=&lt;span style="color:#2aa198">&amp;#34;qos-accept-foreign-ip&amp;#34;&lt;/span> value=&lt;span style="color:#2aa198">&amp;#34;false&amp;#34;&lt;/span>&lt;span style="color:#268bd2">/&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#268bd2">&amp;lt;dubbo:parameter&lt;/span> key=&lt;span style="color:#2aa198">&amp;#34;qos-accept-foreign-ip-whitelist&amp;#34;&lt;/span> value=&lt;span style="color:#2aa198">&amp;#34;123.12.10.13,132.12.10.13/24&amp;#34;&lt;/span>&lt;span style="color:#268bd2">/&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#268bd2">&amp;lt;dubbo:parameter&lt;/span> key=&lt;span style="color:#2aa198">&amp;#34;qos-anonymous-access-permission-level&amp;#34;&lt;/span> value=&lt;span style="color:#2aa198">&amp;#34;NONE&amp;#34;&lt;/span>&lt;span style="color:#268bd2">/&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#268bd2">&amp;lt;dubbo:parameter&lt;/span> key=&lt;span style="color:#2aa198">&amp;#34;qos-port&amp;#34;&lt;/span> value=&lt;span style="color:#2aa198">&amp;#34;33333&amp;#34;&lt;/span>&lt;span style="color:#268bd2">/&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#268bd2">&amp;lt;/dubbo:application&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#268bd2">&amp;lt;dubbo:registry&lt;/span> address=&lt;span style="color:#2aa198">&amp;#34;multicast://224.5.6.7:1234&amp;#34;&lt;/span>&lt;span style="color:#268bd2">/&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#268bd2">&amp;lt;dubbo:protocol&lt;/span> name=&lt;span style="color:#2aa198">&amp;#34;dubbo&amp;#34;&lt;/span> port=&lt;span style="color:#2aa198">&amp;#34;20880&amp;#34;&lt;/span>&lt;span style="color:#268bd2">/&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#268bd2">&amp;lt;dubbo:service&lt;/span> interface=&lt;span style="color:#2aa198">&amp;#34;org.apache.dubbo.demo.provider.DemoService&amp;#34;&lt;/span> ref=&lt;span style="color:#2aa198">&amp;#34;demoService&amp;#34;&lt;/span>&lt;span style="color:#268bd2">/&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#268bd2">&amp;lt;bean&lt;/span> id=&lt;span style="color:#2aa198">&amp;#34;demoService&amp;#34;&lt;/span> class=&lt;span style="color:#2aa198">&amp;#34;org.apache.dubbo.demo.provider.DemoServiceImpl&amp;#34;&lt;/span>&lt;span style="color:#268bd2">/&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#268bd2">&amp;lt;/beans&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="spring-boot-自动装配">spring-boot 自动装配&lt;/h3>
&lt;p>如果是 spring-boot 的应用，可以在&lt;code>application.properties&lt;/code>或者&lt;code>application.yml&lt;/code>上配置:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-fallback" data-lang="fallback">&lt;span style="display:flex;">&lt;span>dubbo.application.qos-enable=true
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>dubbo.application.qos-port=33333
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>dubbo.application.qos-accept-foreign-ip=false
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>dubbo.application.qos-accept-foreign-ip-whitelist=123.12.10.13, 132.12.10.13/24
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>dubbo.application.qos-anonymous-access-permission-level=NONE
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>Overview: QoS 命令列表，命令大全</title><link>https://dubbo.apache.org/zh-cn/overview/mannual/java-sdk/reference-manual/qos/qos-list/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://dubbo.apache.org/zh-cn/overview/mannual/java-sdk/reference-manual/qos/qos-list/</guid><description>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>&lt;span style="display:inline-block;width:150px">QoS 命令&lt;/span>&lt;/th>
&lt;th>说明&lt;/th>
&lt;th>&lt;span style="display:inline-block;width:200px">telnet 用法示例&lt;/span>&lt;/th>
&lt;th>&lt;span style="display:inline-block;width:200px">http 用法示例&lt;/span>&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>cd&lt;/td>
&lt;td>设定服务上下文，cd 之后所有的命令都是针对该服务&lt;/td>
&lt;td>cd org.demo.DemoService&lt;/td>
&lt;td>http://localhost:22222/cd?service=org.demo.DemoService&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>count&lt;/td>
&lt;td>展示服务或方法调用次数。暂时只支持 dubbo 协议，不支持 triple 协议；RpcStatus 实现依赖 Active/Limit Filter，需改造&lt;/td>
&lt;td>count org.demo.DemoService &lt;br/>&lt;br/>count org.demo.DemoService methodName&lt;/td>
&lt;td>http://localhost:22222/count?service=org.demo.DemoService&amp;amp;method=methodName&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>disableDetailProfiler&lt;/td>
&lt;td>关闭 RPC 调用 profiler 工具（细粒度版本）&lt;/td>
&lt;td>disableDetailProfiler&lt;/td>
&lt;td>http://localhost:22222/disableDetailProfiler&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>disableRouterSnapshot&lt;/td>
&lt;td>关闭 RPC 请求 Router 路由结果跟踪&lt;/td>
&lt;td>disableRouterSnapshot&lt;/td>
&lt;td>http://localhost:22222/disableRouterSnapshot&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>disableSimpleProfiler&lt;/td>
&lt;td>关闭 RPC 调用 profiler 工具（粗粒度版）&lt;/td>
&lt;td>disableSimpleProfiler&lt;/td>
&lt;td>http://localhost:22222/disableSimpleProfiler&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>enableDetailProfiler&lt;/td>
&lt;td>开启 RPC 调用 profiler 工具（细粒度版本）&lt;/td>
&lt;td>enableDetailProfiler&lt;/td>
&lt;td>http://localhost:22222/enableDetailProfiler&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>enableRouterSnapshot&lt;/td>
&lt;td>开启 RPC 请求 Router 路由结果跟踪，有助于跟踪路由规则执行是否符合预期&lt;/td>
&lt;td>enableRouterSnapshot org.demo.DemoService&lt;/td>
&lt;td>http://localhost:22222/enableRouterSnapshot?service=org.demo.DemoService&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>enableSimpleProfiler&lt;/td>
&lt;td>开启 RPC 调用 profiler 工具（粗粒度版）&lt;/td>
&lt;td>enableSimpleProfiler&lt;/td>
&lt;td>http://localhost:22222/enableSimpleProfiler&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>getAddress&lt;/td>
&lt;td>查看某个服务的有效 ip 地址列表&lt;/td>
&lt;td>getAddress org.demo.DemoService&lt;/td>
&lt;td>http://localhost:22222/getAddress?service=org.demo.DemoService&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>getConfig&lt;/td>
&lt;td>dump 当前应用的有效配置&lt;/td>
&lt;td>getConfig&lt;/td>
&lt;td>http://localhost:22222/getConfig&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>getEnabledRouterSnapshot&lt;/td>
&lt;td>查看当前 “启用 Router 路由结果跟踪” 的服务列表&lt;/td>
&lt;td>getEnabledRouterSnapshot&lt;/td>
&lt;td>http://localhost:22222/getEnabledRouterSnapshot&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>getRecentRouterSnapshot&lt;/td>
&lt;td>查看最近 32 条 “Router 路由结果跟踪” 数据&lt;/td>
&lt;td>getRecentRouterSnapshot&lt;/td>
&lt;td>http://localhost:22222/getRecentRouterSnapshot&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>gracefulShutdown&lt;/td>
&lt;td>从注册中心下线当前 ip 实例注册的所有服务，与offline的区别是，该命令会同时通过 tcp 连接告知所有消费方停止调用此实例。&lt;br/>&lt;br/>如要恢复，请执行 online 上线所有服务&lt;/td>
&lt;td>gracefulShutdown&lt;/td>
&lt;td>http://localhost:22222/gracefulShutdown&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>help&lt;/td>
&lt;td>帮助命令&lt;/td>
&lt;td>help&lt;/td>
&lt;td>http://localhost:22222/help&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>invoke&lt;/td>
&lt;td>调用某个 RPC 服务&lt;/td>
&lt;td>invoke org.demo.DemoService.methodName(1234, &amp;ldquo;abcd&amp;rdquo;, {&amp;ldquo;prop&amp;rdquo;:&amp;ldquo;value&amp;rdquo;})&lt;/td>
&lt;td>?&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>live&lt;/td>
&lt;td>检查当前进程/服务是否存活，可配置为 kubernetes liveness&lt;/td>
&lt;td>live&lt;/td>
&lt;td>http://localhost:22222/live&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>loggerInfo&lt;/td>
&lt;td>查看当前日志 logger 配置&lt;/td>
&lt;td>loggerInfo&lt;/td>
&lt;td>http://localhost:22222/loggerInfo&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>ls&lt;/td>
&lt;td>查看当前所有服务列表&lt;/td>
&lt;td>ls&lt;/td>
&lt;td>http://localhost:22222/ls&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>metrics&lt;/td>
&lt;td>查看 metrics 指标，需开启metrics 统计才能看到数据。什么粒度？&lt;/td>
&lt;td>metrics&lt;/td>
&lt;td>http://localhost:22222/metrics&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>metrics_default&lt;/td>
&lt;td>查看 metrics 指标 ，需开启metrics 统计才能看到数据。什么粒度？&lt;/td>
&lt;td>metrics_default&lt;/td>
&lt;td>http://localhost:22222/metrics_default&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>offline&lt;/td>
&lt;td>从注册中心下线某个或多个服务（包含应用级和接口级地址）&lt;/td>
&lt;td>offline &lt;br/>&lt;br/> offline org.demo.DemoService&lt;/td>
&lt;td>http://localhost:22222/offline &lt;br/>&lt;br/> http://localhost:22222/offline?service=org.demo.DemoService&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>offlineApp&lt;/td>
&lt;td>从注册中心下线某个或多个服务（仅应用级）&lt;/td>
&lt;td>offlineApp &lt;br/>&lt;br/> offlineApp org.demo.DemoService&lt;/td>
&lt;td>http://localhost:22222/offlineApp?service=org.demo.DemoService&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>offlineInterface&lt;/td>
&lt;td>从注册中心下线某个或多个服务（仅接口级）&lt;/td>
&lt;td>offlineInterface &lt;br/>&lt;br/> offlineInterface org.demo.DemoService&lt;/td>
&lt;td>http://localhost:22222/offlineInterface?service=org.demo.DemoService&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>online&lt;/td>
&lt;td>将一个或多个服务注册到注册中心（包含应用级和接口级地址）&lt;/td>
&lt;td>online &lt;br/>&lt;br/> online org.demo.DemoService&lt;/td>
&lt;td>http://localhost:22222/online?service=org.demo.DemoService&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>onlineApp&lt;/td>
&lt;td>将一个或多个服务注册到注册中心（仅应用级）&lt;/td>
&lt;td>onlineApp &lt;br/>&lt;br/> onlineApp org.demo.DemoService&lt;/td>
&lt;td>http://localhost:22222/onlineApp?service=org.demo.DemoService&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>onlineInterface&lt;/td>
&lt;td>将一个或多个服务注册到注册中心（仅接口级）&lt;/td>
&lt;td>onlineInterface &lt;br/>&lt;br/> onlineInterface org.demo.DemoService&lt;/td>
&lt;td>http://localhost:22222/onlineInterface?service=org.demo.DemoService&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>ps&lt;/td>
&lt;td>查看当前进程信息，包括监听的端口等&lt;/td>
&lt;td>ps&lt;/td>
&lt;td>http://localhost:22222/ps&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>publishMetadata&lt;/td>
&lt;td>发布或更新当前应用Metadata数据（可用于手动更新应用级服务发现元数据）。publishMetadata 10 表示延迟 10s 发布。在3.3.0之前版本的命令为 publish-metadata&lt;/td>
&lt;td>publishMetadata &lt;br/>&lt;br/> publishMetadata 10&lt;/td>
&lt;td>http://localhost:22222/publishMetadata&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>pwd&lt;/td>
&lt;td>查看当前服务上下文，与 cd 配合使用&lt;/td>
&lt;td>pwd&lt;/td>
&lt;td>http://localhost:22222/pwd&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>quit&lt;/td>
&lt;td>退出当前 telnet 命令&lt;/td>
&lt;td>quit&lt;/td>
&lt;td>无&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>ready&lt;/td>
&lt;td>检查当前进程/服务是否准备就绪对外服务，可配置为 kubernetes readiness&lt;/td>
&lt;td>ready&lt;/td>
&lt;td>http://localhost:22222/ready&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>select&lt;/td>
&lt;td>调用方法？和invoke的关系？&lt;/td>
&lt;td>?&lt;/td>
&lt;td>http://localhost:22222/?&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>serializeCheckStatus&lt;/td>
&lt;td>检查当前在序列化白名单中的类列表&lt;/td>
&lt;td>serializeCheckStatus&lt;/td>
&lt;td>http://localhost:22222/serializeCheckStatus&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>serializeWarnedClasses&lt;/td>
&lt;td>检查当前在序列化警告名单中的类列表&lt;/td>
&lt;td>serializeWarnedClasses&lt;/td>
&lt;td>http://localhost:22222/serializeWarnedClasses&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>setProfilerWarnPercent&lt;/td>
&lt;td>控制序列化报警频率（仅限在警告名单中的类）&lt;/td>
&lt;td>setProfilerWarnPercent 0.75&lt;/td>
&lt;td>http://localhost:22222/setProfilerWarnPercent?k=0.75&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>shutdown&lt;/td>
&lt;td>尝试关闭当前 Dubbo 应用（销毁所有资源，重启前无法恢复）&lt;/td>
&lt;td>shutdown&lt;/td>
&lt;td>http://localhost:22222/shutdown&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>startup&lt;/td>
&lt;td>检查当前进程/服务是否已经正常启动，可配置为 kubernetes startup&lt;/td>
&lt;td>startup&lt;/td>
&lt;td>http://localhost:22222/startup&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>switchLogLevel&lt;/td>
&lt;td>动态调整日志级别&lt;/td>
&lt;td>switchLogLevel debug&lt;/td>
&lt;td>http://localhost:22222/switchLogLevel?k=debug&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>switchLogger&lt;/td>
&lt;td>切换日志logger组件。可用 logger 组件，可通过 loggerInfo 查看（切换前请务必确保应用已经加入相关组件依赖）&lt;/td>
&lt;td>switchLogger log4j2&lt;/td>
&lt;td>http://localhost:22222/switchLogger?k=log4j2&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>version&lt;/td>
&lt;td>查看当前使用的 Dubbo 框架版本&lt;/td>
&lt;td>version&lt;/td>
&lt;td>http://localhost:22222/version&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table></description></item><item><title>Overview: 包含对每个命令的使用方法、效果的详细说明</title><link>https://dubbo.apache.org/zh-cn/overview/mannual/java-sdk/reference-manual/qos/introduction/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://dubbo.apache.org/zh-cn/overview/mannual/java-sdk/reference-manual/qos/introduction/</guid><description/></item></channel></rss>